!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.urlList=i,this.onload=s,this.bufferList=new Array,this.loadCount=0}var e,i,n;return e=t,(i=[{key:"loadBuffer",value:function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var s=this;i.onload=function(){s.context.decodeAudioData(i.response,(function(i){i?(s.bufferList[e]=i,++s.loadCount==s.urlList.length&&s.onload(s.bufferList)):alert("error decoding file data: "+t)}))},i.onerror=function(){alert("BufferLoader: XHR error")},i.send()}},{key:"load",value:function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)}}])&&s(e.prototype,i),n&&s(e,n),t}();function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eleList=document.querySelector("#instrumentals-ul").children,this.numArtists=this.eleList.length,this.firstNames=[],this.gatherImageStrings=this.gatherImageStrings.bind(this),this.imageStringsObj=this.gatherImageStrings(),this.changeImage=this.changeImage.bind(this)}var e,i,s;return e=t,(i=[{key:"gatherImageStrings",value:function(){for(var t={},e=0,i=0;i<this.numArtists;i++){var s=[],n=this.eleList[i].innerHTML.split(" -")[0].split(" ")[0].toLowerCase();this.firstNames.push(n);for(var a=e;a<e+4;a++)s.push("./dist/images/artist-pictures/".concat(n,"/").concat(a+1,".jpg"));t[n]=s,e+=4}return t}},{key:"changeImage",value:function(t,e,i){e.src=this.imageStringsObj[t][i]}},{key:"triggerImageChanges",value:function(t,e){var i=this,s=0;setInterval((function(){s++,s%=4,i.changeImage(t,e,s)}),508.47457627118644)}}])&&a(e.prototype,i),s&&a(e,s),t}();function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instrumentalList=document.querySelector("#instrumentals-ul").children,this.vocalList=document.querySelector("#vocals-ul").children,this.modalBg=document.querySelector(".modal-background"),this.modal=document.querySelector(".modal-child"),this.startBtn=document.querySelector(".start-btn"),this.questionBtn=document.querySelector("#question-btn"),this.processInstTrackClick=this.processInstTrackClick.bind(this),this.processVocalsTrackClick=this.processVocalsTrackClick.bind(this),this.addSelectionClickListeners=this.addSelectionClickListeners.bind(this),this.addModalClickListeners=this.addModalClickListeners.bind(this),this.buffer=e,this.timeToLoadTracks=!0,this.instrumentalClicked=!1,this.vocalClicked=!1}var e,i,s;return e=t,(i=[{key:"processInstTrackClick",value:function(t){if(!this.instrumentalClicked){document.querySelector("#inst-prompt").setAttribute("style","display: none;"),this.instrumentalClicked=!0;var e=document.querySelector("#vocal-prompt");e.innerHTML="Now choose a vocal! Justin's a great combo.",e.setAttribute("style","margin-top: -26px; margin-bottom: 10px; -webkit-animation: flash linear 1s infinite; animation: flash linear 1s infinite;")}this.vocalClicked&&document.querySelector("#final-prompt").setAttribute("style","display: none;");for(var i=0;i<this.instrumentalList.length;i++){var s=this.instrumentalList[i],n=s.innerHTML.split(" -")[0].split(" ")[0].toLowerCase(),a=document.querySelector("#".concat(n,"-left-img"));t===i?s.classList.contains("selected")?(s.classList.remove("selected"),this.buffer.instGainNodes[i].gain.value=0,a.setAttribute("class","hidden"),document.querySelector("#black-bg-left").setAttribute("class","showing")):(s.classList.add("selected"),this.buffer.instGainNodes[i].gain.value=1,a.setAttribute("class","showing"),document.querySelector("#black-bg-left").setAttribute("class","hidden")):(s.classList.remove("selected"),this.buffer.instGainNodes[i].gain.value=0,a.setAttribute("class","hidden"))}}},{key:"processVocalsTrackClick",value:function(t){if(this.instrumentalClicked){if(this.vocalClicked)document.querySelector("#final-prompt").setAttribute("style","display: none;");else{document.querySelector("#vocal-prompt").setAttribute("style","display: none;"),this.vocalClicked=!0;var e=document.querySelector("#final-prompt");e.innerHTML="Now mix and match!",e.setAttribute("style","width: 340px; font-size: 30px; margin: -37.5px 0px 8px 23px; text-align: center; -webkit-animation: flash linear 1s infinite; animation: flash linear 1s infinite;")}for(var i=0;i<this.vocalList.length;i++){var s=this.vocalList[i],n=s.innerHTML.split(" -")[0].split(" ")[0].toLowerCase(),a=document.querySelector("#".concat(n,"-right-img"));t===i?s.classList.contains("selected")?(s.classList.remove("selected"),this.buffer.voxGainNodes[i].gain.value=0,a.setAttribute("class","hidden"),document.querySelector("#black-bg-right").setAttribute("class","showing")):(s.classList.add("selected"),this.buffer.voxGainNodes[i].gain.value=1,a.setAttribute("class","showing"),document.querySelector("#black-bg-right").setAttribute("class","hidden")):(s.classList.remove("selected"),this.buffer.voxGainNodes[i].gain.value=0,a.setAttribute("class","hidden"))}}}},{key:"openModal",value:function(){this.modalBg.setAttribute("class","modal-background"),this.modal.setAttribute("class","modal-child"),this.startBtn.setAttribute("class","start-btn")}},{key:"closeModal",value:function(){this.modalBg.setAttribute("class","modal-background-fade-out"),this.modal.setAttribute("class","modal-child-fade-out"),this.startBtn.setAttribute("class","modal-child-fade-out")}},{key:"addSelectionClickListeners",value:function(){for(var t=this,e=function(e){t.instrumentalList[e].addEventListener("click",(function(){return t.processInstTrackClick(e)}))},i=0;i<this.instrumentalList.length;i++)e(i);for(var s=function(e){t.vocalList[e].onclick=function(){return t.processVocalsTrackClick(e)}},n=0;n<this.vocalList.length;n++)s(n)}},{key:"addModalClickListeners",value:function(){var t=this;this.modalBg.onclick=function(){t.timeToLoadTracks||t.closeModal()},this.startBtn.onclick=function(e){e.stopPropagation(),t.timeToLoadTracks&&(t.buffer.init(),t.timeToLoadTracks=!1),t.closeModal()},this.modal.onclick=function(t){t.stopPropagation()},this.questionBtn.onclick=function(){t.openModal()}}}])&&r(e.prototype,i),s&&r(e,s),t}();function c(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageTimer=new o,this.init=this.init.bind(this),this.onLoad=this.onLoad.bind(this),this.addFirstPlayClickListener=this.addFirstPlayClickListener.bind(this)}var e,i,s;return e=t,(i=[{key:"addFirstPlayClickListener",value:function(){}},{key:"init",value:function(){var t=window.AudioContext||window.webkitAudioContext||!1;t?this.context=new t:alert("Sorry, but your browser does not support the Web Audio API, which is necessary for MASHER to work! Please, upgrade to the latest version of your browser or download Google Chrome or Mozilla Firefox."),this.finalMasterGainNode=this.context.createGain(),this.finalMasterGainNode.connect(this.context.destination),this.instMasterGainNode=this.context.createGain(),this.instMasterGainNode.connect(this.finalMasterGainNode),this.voxMasterGainNode=this.context.createGain(),this.voxMasterGainNode.connect(this.finalMasterGainNode),this.instrumentals=[],this.vocals=[],this.instGainNodes=[],this.voxGainNodes=[],this.bufferLoader=new n(this.context,["./dist/stems/instrumentals/ariana_inst.wav","./dist/stems/instrumentals/grimes_inst.wav","./dist/stems/instrumentals/lizzo_inst.wav","./dist/stems/instrumentals/taylor_inst.wav","./dist/stems/instrumentals/kim_inst.wav","./dist/stems/instrumentals/justin_inst.wav","./dist/stems/instrumentals/charli_inst.wav","./dist/stems/instrumentals/katy_inst.wav","./dist/stems/vocals/ariana_vox.wav","./dist/stems/vocals/grimes_vox.wav","./dist/stems/vocals/lizzo_vox.wav","./dist/stems/vocals/taylor_vox.wav","./dist/stems/vocals/kim_vox.wav","./dist/stems/vocals/justin_vox.wav","./dist/stems/vocals/charli_vox.wav","./dist/stems/vocals/katy_vox.wav"],this.onLoad),this.bufferLoader.load()}},{key:"onLoad",value:function(t){for(var e=this,i=0;i<8;i++)this.instrumentals.push(this.context.createBufferSource()),this.instrumentals[i].buffer=t[i],this.instGainNodes[i]=this.context.createGain(),this.instrumentals[i].connect(this.instGainNodes[i]),this.instGainNodes[i].connect(this.instMasterGainNode),this.instGainNodes[i].gain.value=0,this.instrumentals[i].loop=!0,this.instrumentals[i].start(0);for(var s=0;s<8;s++)this.vocals.push(this.context.createBufferSource()),this.vocals[s].buffer=t[s+8],this.voxGainNodes[s]=this.context.createGain(),this.vocals[s].connect(this.voxGainNodes[s]),this.voxGainNodes[s].connect(this.voxMasterGainNode),this.voxGainNodes[s].gain.value=0,this.vocals[s].loop=!0,this.vocals[s].start(0);this.finalMasterGainNode.gain.value=.8;var n=document.querySelector("#play-pause");n.setAttribute("playStatus","playing"),n.firstElementChild.setAttribute("src","./dist/images/soundon.png"),n.firstElementChild.setAttribute("id","play-pause-img"),document.querySelector("#full-black-bg").setAttribute("class","hidden");var a=document.querySelector("#inst-prompt");a.innerHTML="Choose an instrumental! Ariana's a good start.",a.setAttribute("style","margin-top: -26px; margin-bottom: 10px; -webkit-animation: flash linear 1s infinite; animation: flash linear 1s infinite;"),Array.from(document.querySelector("#left-img-wrapper").children).slice(2).forEach((function(t,i){e.imageTimer.triggerImageChanges(e.imageTimer.firstNames[i],t)})),Array.from(document.querySelector("#right-img-wrapper").children).slice(2).forEach((function(t,i){e.imageTimer.triggerImageChanges(e.imageTimer.firstNames[i],t)})),new l(window.newBuffer).addSelectionClickListeners();var o=document.querySelector(".button-img");n.onclick=function(){"loading-img"!==o.id&&("paused"===n.getAttribute("playStatus")?(n.firstElementChild.setAttribute("src","./dist/images/soundon.png"),n.setAttribute("playStatus","playing"),document.querySelector("#full-black-bg").setAttribute("class","hidden"),e.finalMasterGainNode.gain.value=.8):(e.finalMasterGainNode.gain.value=0,n.firstElementChild.setAttribute("src","./dist/images/mute.png"),n.setAttribute("playStatus","paused"),document.querySelector("#full-black-bg").setAttribute("class","showing")))};var r=document.querySelector("#inst-solo-btn"),c=document.querySelector("#vox-solo-btn"),u=document.querySelector("#all-btn");r.onclick=function(t){t.stopPropagation(),r.classList.contains("solod")||(r.setAttribute("class","solod"),c.setAttribute("class","muted"),u.setAttribute("class","muted"),e.voxMasterGainNode.gain.value=0,e.instMasterGainNode.gain.value=.8,document.querySelector("#black-bg-right").setAttribute("class","showing"),document.querySelector("#black-bg-left").setAttribute("class","hidden"))},c.onclick=function(t){t.stopPropagation(),c.classList.contains("solod")||(c.setAttribute("class","solod"),r.setAttribute("class","muted"),u.setAttribute("class","muted"),e.voxMasterGainNode.gain.value=.8,e.instMasterGainNode.gain.value=0,document.querySelector("#black-bg-left").setAttribute("class","showing"),document.querySelector("#black-bg-right").setAttribute("class","hidden"))},u.onclick=function(t){t.stopPropagation(),u.classList.contains("solod")||(u.setAttribute("class","solod"),c.setAttribute("class","muted"),r.setAttribute("class","muted"),e.voxMasterGainNode.gain.value=.8,e.instMasterGainNode.gain.value=.8,document.querySelector("#black-bg-right").setAttribute("class","hidden"),document.querySelector("#black-bg-left").setAttribute("class","hidden"))}}}])&&c(e.prototype,i),s&&c(e,s),t}();document.addEventListener("DOMContentLoaded",(function(){window.newBuffer=new u,new l(window.newBuffer).addModalClickListeners(),setTimeout((function(){document.querySelector("#loading-bg").setAttribute("id","hidden-loading-bg")}),1500)}))}]);
//# sourceMappingURL=index.js.map